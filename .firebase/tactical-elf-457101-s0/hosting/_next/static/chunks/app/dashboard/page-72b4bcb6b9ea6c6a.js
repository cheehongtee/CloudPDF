(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1154:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1788:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},3741:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});var a=r(5155);function s(e){let{className:t,variant:r="default",size:s="default",children:l,...d}=e,i={default:"bg-blue-600 text-white hover:bg-blue-700/90 dark:bg-blue-500 dark:hover:bg-blue-400/90",outline:"border border-gray-300 dark:border-gray-600 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100",ghost:"hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100"},n={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"},c=i[r]||i.default,o=n[s]||n.default;return(0,a.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background dark:focus-visible:ring-offset-gray-800"," ").concat(c," ").concat(o," ").concat(t).trim(),...d,children:l})}r(2115)},5339:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5494:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var a=r(5155),s=r(6874),l=r.n(s),d=r(9576),i=r(5695),n=r(3783),c=r(7434),o=r(3428),x=r(3408),u=r(4835),h=r(6766);function m(){let{user:e,logout:t}=(0,d.A)(),r=(0,i.useRouter)(),s=async()=>{try{await t(),r.push("/auth/login")}catch(e){console.error("Failed to log out",e)}};return(0,a.jsx)("nav",{className:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(l(),{href:"/",className:"flex items-center",children:(0,a.jsx)(h.default,{src:"/UOSM_Logo.png",alt:"UOSM Logo",width:100,height:32,className:"h-8 w-auto",style:{objectFit:"contain"}})}),e&&(0,a.jsxs)("div",{className:"hidden md:flex space-x-1 items-center border-l border-gray-200 dark:border-gray-700 pl-4",children:[(0,a.jsxs)(g,{href:"/dashboard",children:[(0,a.jsx)(n.A,{size:18,className:"mr-1"}),"Dashboard"]}),(0,a.jsxs)(g,{href:"/pdf-viewer",children:[(0,a.jsx)(c.A,{size:18,className:"mr-1"}),"Viewer"]}),(0,a.jsxs)(g,{href:"/pdf-tools/merge",children:[(0,a.jsx)(o.A,{size:18,className:"mr-1"}),"Merge"]}),(0,a.jsxs)(g,{href:"/pdf-tools/split",children:[(0,a.jsx)(x.A,{size:18,className:"mr-1"}),"Split"]})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:e?(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"hidden sm:inline text-sm text-gray-600 dark:text-gray-300",children:e.email}),(0,a.jsx)("button",{onClick:s,title:"Logout",className:"flex items-center p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:(0,a.jsx)(u.A,{size:20})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l(),{href:"/auth/login",className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors rounded-md",children:"Login"}),(0,a.jsx)(l(),{href:"/auth/register",className:"inline-flex items-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 dark:bg-blue-500 dark:hover:bg-blue-400 transition-colors",children:"Register"})]})})]})})})}function g(e){let{href:t,children:r}=e;return(0,a.jsx)(l(),{href:t,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:r})}},6089:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(5155),s=r(2115),l=r(5494),d=r(9053),i=r(9576),n=r(6104),c=r(5317),o=r(858),x=r(7703),u=r(3741),h=r(1154),m=r(5339),g=r(9946);let f=(0,g.A)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var y=r(7434),p=r(1788);let b=(0,g.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var j=r(6874),v=r.n(j);function k(){let{user:e}=(0,i.A)(),[t,r]=(0,s.useState)([]),[g,j]=(0,s.useState)(!0),[k,N]=(0,s.useState)(null),[w,A]=(0,s.useState)(null),[S,D]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!e)return void j(!1);j(!0),N(null);let t=(0,c.rJ)(n.db,"users",e.uid,"uploadedPdfs"),a=(0,c.P)(t,(0,c.My)("uploadedAt","desc")),s=(0,c.aQ)(a,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data(),uploadedAt:e.data().uploadedAt||null})}),r(t),j(!1)},e=>{console.error("Error fetching files:",e),N("Failed to fetch uploaded files."),j(!1)});return()=>s()},[e]);let z=e=>e?e.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Date unavailable",F=async(t,r)=>{if(e&&confirm('Are you sure you want to delete "'.concat(r,'"? This action cannot be undone.'))){A(t),D(null);try{let a=(0,o.KR)(n.IG,"users/".concat(e.uid,"/pdfs/").concat(r));await (0,o.XR)(a),console.log("Successfully deleted ".concat(r," from storage."));let s=(0,c.H9)(n.db,"users",e.uid,"uploadedPdfs",t);await (0,c.kd)(s),console.log("Successfully deleted Firestore doc ".concat(t,"."))}catch(e){console.error("Error deleting file:",e),D("Failed to delete ".concat(r,". Error: ").concat(e.message)),setTimeout(()=>D(null),5e3)}finally{A(null)}}};return(0,a.jsx)(d.A,{children:(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(l.A,{}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)(x.Zp,{className:"mb-8",children:[(0,a.jsxs)(x.aR,{children:[(0,a.jsx)(x.ZB,{children:"Account Information"}),(0,a.jsx)(x.BT,{children:"Your currently logged-in account details."})]}),(0,a.jsxs)(x.Wu,{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Email:"}),(0,a.jsx)("span",{className:"text-gray-800 dark:text-gray-200",children:null==e?void 0:e.email})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"User ID:"}),(0,a.jsx)("span",{className:"text-gray-800 dark:text-gray-200 break-all",children:null==e?void 0:e.uid})]})]})]}),(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{children:[(0,a.jsx)(x.ZB,{children:"Your CloudPDF Files"}),(0,a.jsx)(x.BT,{children:"PDFs you have uploaded to your CloudPDF account."})]}),(0,a.jsxs)(x.Wu,{children:[g&&(0,a.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("p",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading files..."})]}),k&&(0,a.jsxs)("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded text-sm text-center flex items-center justify-center gap-2",children:[(0,a.jsx)(m.A,{size:16})," ",k]}),S&&(0,a.jsxs)("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded text-sm text-center mb-4 flex items-center justify-center gap-2",children:[(0,a.jsx)(m.A,{size:16})," ",S]}),!g&&!k&&0===t.length&&(0,a.jsxs)("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(f,{className:"mx-auto h-12 w-12 mb-2"}),(0,a.jsx)("p",{children:"You haven't uploaded any PDF files yet."}),(0,a.jsx)(v(),{href:"/pdf-viewer",className:"mt-2 inline-block",children:(0,a.jsx)(u.$,{variant:"outline",size:"sm",children:"Upload your first PDF"})})]}),!g&&!k&&t.length>0&&(0,a.jsx)("ul",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md shadow-sm gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 overflow-hidden flex-grow min-w-0",children:[(0,a.jsx)(y.A,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",title:e.fileName,children:e.fileName}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Uploaded: ",z(e.uploadedAt)]})]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-1",children:[(0,a.jsx)("a",{href:e.downloadURL,target:"_blank",rel:"noopener noreferrer",download:e.fileName,children:(0,a.jsx)(u.$,{variant:"ghost",size:"icon",title:"Download",className:"text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})}),(0,a.jsx)(u.$,{variant:"ghost",size:"icon",title:"Delete",onClick:()=>F(e.id,e.fileName),disabled:w===e.id,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-500 disabled:opacity-50",children:w===e.id?(0,a.jsx)(h.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(b,{className:"h-4 w-4"})})]})]},e.id))})]})]})]})]})})}},6104:(e,t,r)=>{"use strict";r.d(t,{IG:()=>o,db:()=>n,j2:()=>c});var a=r(3915),s=r(5317),l=r(6203),d=r(858);let i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyDI7MAPqIvl1cCkwZl_Nr4bYmOArNzIqzM",authDomain:"tactical-elf-457101-s0.firebaseapp.com",projectId:"tactical-elf-457101-s0",storageBucket:"tactical-elf-457101-s0.firebasestorage.app",messagingSenderId:"695823233926",appId:"1:695823233926:web:aeac2bc2b5069d8baa7207",measurementId:"G-JQF8DMHYSF"}),n=(0,s.aU)(i),c=(0,l.xI)(i),o=(0,d.c7)(i)},6275:(e,t,r)=>{Promise.resolve().then(r.bind(r,6089))},7703:(e,t,r)=>{"use strict";r.d(t,{BT:()=>i,Wu:()=>n,ZB:()=>d,Zp:()=>s,aR:()=>l});var a=r(5155);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm ".concat(t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-1.5 p-6 ".concat(t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("h3",{className:"text-lg font-semibold leading-none tracking-tight ".concat(t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 ".concat(t),...r})}function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:"p-6 pt-0 ".concat(t),...r})}r(2115)},9053:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),s=r(2115),l=r(5695),d=r(9576);function i(e){let{children:t}=e,{user:r,loading:i}=(0,d.A)(),n=(0,l.useRouter)();return((0,s.useEffect)(()=>{i||r||n.push("/auth/login")},[r,i,n]),i)?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-t-2 border-blue-600"})}):r?(0,a.jsx)(a.Fragment,{children:t}):null}},9576:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>o});var a=r(5155),s=r(2115),l=r(6203),d=r(6104),i=r(5317);let n=(0,s.createContext)(void 0);function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function o(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[o,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>(0,l.hg)(d.j2,e=>{c(e),x(!1)}),[]);let u=async(e,t)=>{try{let r=await (0,l.eJ)(d.j2,e,t),a=r.user;if(a){let e=(0,i.H9)(d.db,"users",a.uid);await (0,i.BN)(e,{uid:a.uid,email:a.email,createdAt:(0,i.O5)()}),console.log("User document created in Firestore for UID:",a.uid)}return r}catch(e){throw console.error("Registration and Firestore doc creation failed:",e),e}};return(0,a.jsx)(n.Provider,{value:{user:r,loading:o,login:(e,t)=>(0,l.x9)(d.j2,e,t),register:u,logout:()=>(0,l.CI)(d.j2)},children:!o&&t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,158,183,822,402,441,684,358],()=>t(6275)),_N_E=e.O()}]);